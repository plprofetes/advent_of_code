{
  // See https://go.microsoft.com/fwlink/?LinkId=733558
  // for the documentation about the tasks.json format
  "version": "2.0.0",
  "tasks": [
    {
        "label": "build",
        "command": "docker run --rm -v ${workspaceFolder}:/src/main ponylang/ponyc bash -c 'cd $(dirname ${relativeFile}) && ponyc -V 1 -d -b main && ./main'",
        // "command": "docker run --rm -v ${workspaceFolder}:/src/main ponylang/ponyc bash -c 'cd $(dirname ${relativeFile}) && ponyc -V 1 -d -b main && ./main | tee log.log 2>&1'",
        // "command": "docker run --rm -v ${workspaceFolder}:/src/main ponylang/ponyc bash -c 'cd $(dirname ${relativeFile}) && ponyc -V 1 -d -b main && ./main --ponygcinitial 1 --ponygcfactor 1 '",
        "type": "shell",
        "presentation": {
            "echo": true,
            "reveal": "always",
            "focus": false,
            "panel": "shared"
        },
        "group": {
            "kind": "build",
            "isDefault": true //ctrl+shift+b
        },
        "problemMatcher": {
            "owner": "pony",
            "fileLocation": [
                "relative",
                "${workspaceFolder}"
            ],
            "pattern": [
                {
                    "regexp": "^(.+):$",
                    "severity": 1
                },
                {
                    "regexp": "^\\/src\\/main\\/([^:]+):(\\d+):(\\d+):\\s+(.*)$",
                    "file": 1,
                    "line": 2,
                    "column": 3,
                    "code": 4
                },
                {
                    "regexp": "^(\\s.+)$",
                    "message": 1,
                    "loop": true
                }
            ]
        }
    },
    {
        "label": "run",
        "command": "docker run --rm -v ${workspaceFolder}:/src/main ponylang/ponyc bash -c 'cd $(dirname ${relativeFile}) &&  ./main'",
        "type": "shell",
        "presentation": {
            "echo": true,
            "reveal": "always",
            "focus": true,
            "panel": "shared"
        },
        "group": {
            "kind": "test",
            "isDefault": true // map as ctrl+alt+b
        }
    }
]
}